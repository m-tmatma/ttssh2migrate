# Copied from https://qiita.com/igrep/items/97e5e9ca6f38e4da674a
# Copied from https://github.com/svn-all-fast-export/svn2git/blob/master/samples/merged-branches-tags.rules

#
# Declare the repositories we know about:
#

create repository git-repository
end repository

#
# Declare the rules
# Note: rules must end in a slash
#

match /trunk/
  repository git-repository
  branch master
end match

# 下記のようなエラーが出るため、問題のtagはスキップする。
# 参考: https://github.com/svn-all-fast-export/svn2git/issues/26
# Exporting revision 91340     /tags/broken_tag1 was copied from /tags rev 91339
# .git-repository : branch broken_tag1 is branching from tags
# "broken_tag1" in repository "git-repository" is branching from branch "tags" but the latter doesn't exist. Can't continue.
# 正規表現でマッチしているようなので、(broken_tag1|broken_tag2|broken_tag3)と書けば複数指定できる。
match /tags/(broken_tag1)/
end match

# Subversion doesn't understand the Git concept of tags
# In Subversion, tags are really branches
#
# Only a post-processing (i.e., after converting to Git) of the tag
# branches can we be sure that a tag wasn't moved or changed from the
# branch it was copied from
#
# So we don't pretend that SVN tags are Git tags and then import
# everything as one

match /(branches|tags)/([^/]+)/
  repository git-repository
  branch \2
end match

# どうもbranchesでもtagsでもないディレクトリーがあるらしいので、ひとまずそういうブランチとして作ってしまう
match /(.*)/
  repository git-repository
  branch \1
end match

